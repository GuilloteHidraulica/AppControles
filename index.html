<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guillote Hidr√°ulica - Sistema de Control</title>
    <style>
        :root {
            --acero: #2c3e50;
            --azul-hidraulico: #2980b9;
            --naranja-mecanico: #e67e22;
            --gris-fondo: #1a1a1a;
            --blanco-humo: #ecf0f1;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: var(--gris-fondo);
            color: var(--blanco-humo);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .contenedor-principal {
            width: 90%;
            max-width: 500px;
            background: var(--acero);
            border: 4px solid var(--azul-hidraulico);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 0 30px rgba(0,0,0,0.7);
            text-align: center;
        }

        h1 {
            color: var(--azul-hidraulico);
            text-transform: uppercase;
            font-size: 1.5rem;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--azul-hidraulico);
            padding-bottom: 10px;
        }

        /* Botones del Men√∫ Principal */
        .menu-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .btn-menu {
            padding: 20px;
            font-size: 1.1rem;
            font-weight: bold;
            color: white;
            background: #34495e;
            border: 2px solid var(--azul-hidraulico);
            border-radius: 10px;
            cursor: pointer;
            transition: 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            text-transform: uppercase;
        }

        .btn-menu:hover {
            background: var(--azul-hidraulico);
            transform: scale(1.03);
            box-shadow: 0 0 15px var(--azul-hidraulico);
        }

        .btn-naranja { border-color: var(--naranja-mecanico); }
        .btn-naranja:hover { background: var(--naranja-mecanico); box-shadow: 0 0 15px var(--naranja-mecanico); }

        /* Vistas ocultas */
        .vista { display: none; text-align: left; }
        .activa { display: block; }

        input, textarea, select {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            background: #1a1a1a;
            border: 1px solid var(--azul-hidraulico);
            color: white;
            border-radius: 5px;
            box-sizing: border-box;
        }

        .btn-volver {
            background: #7f8c8d;
            border: none;
            padding: 10px;
            color: white;
            margin-bottom: 15px;
            cursor: pointer;
            border-radius: 5px;
        }

        .tarjeta-archivo {
            background: white;
            color: #333;
            padding: 10px;
            margin-bottom: 10px;
            border-left: 5px solid var(--naranja-mecanico);
            border-radius: 3px;
        }
    </style>
</head>
<body>

<div class="contenedor-principal">
    
    <!-- MENU PRINCIPAL -->
    <div id="menu" class="vista activa">
        <h1>‚öôÔ∏è GUILLOTE HIDR√ÅULICA</h1>
        <div class="menu-grid">
            <button class="btn-menu" onclick="irA('nuevo')">üë§ Cliente Nuevo</button>
            <button class="btn-menu" onclick="irA('existente')">üîç Cliente Existente</button>
            <button class="btn-menu btn-naranja" onclick="irA('archivo'); cargarArchivo();">üìÇ Archivo de Controles</button>
        </div>
    </div>

    <!-- VISTA: CLIENTE NUEVO -->
    <div id="nuevo" class="vista">
        <button class="btn-volver" onclick="irA('menu')">‚¨Ö Volver</button>
        <h2>Nuevo Registro</h2>
        <input type="text" id="nombre" placeholder="Nombre del Cliente">
        <input type="text" id="equipo" placeholder="Equipo / M√°quina">
        <textarea id="detalle" rows="4" placeholder="Detalle del problema..."></textarea>
        <button class="btn-menu" style="width:100%" onclick="guardarDato()">üíæ Guardar en Archivo</button>
    </div>

    <!-- VISTA: CLIENTE EXISTENTE (Buscador) -->
    <div id="existente" class="vista">
        <button class="btn-volver" onclick="irA('menu')">‚¨Ö Volver</button>
        <h2>Buscar Cliente</h2>
        <input type="text" placeholder="Ingrese nombre o OT...">
        <p style="text-align: center; color: #95a5a6;">Funci√≥n de b√∫squeda en desarrollo...</p>
    </div>

    <!-- VISTA: ARCHIVO -->
    <div id="archivo" class="vista">
        <button class="btn-volver" onclick="irA('menu')">‚¨Ö Volver</button>
        <h2>Historial de Trabajos</h2>
        <div id="lista-archivo" style="max-height: 300px; overflow-y: auto;">
            <!-- Aqu√≠ aparecen los datos guardados -->
        </div>
        <button class="btn-volver" style="width: 100%; margin-top: 10px;" onclick="descargarJSON()">üì• Descargar Backup .JSON</button>
    </div>

</div>

<script>
    function irA(idVista) {
        document.querySelectorAll('.vista').forEach(v => v.classList.remove('activa'));
        document.getElementById(idVista).classList.add('activa');
    }

    function guardarDato() {
        const cliente = document.getElementById('nombre').value;
        const equipo = document.getElementById('equipo').value;
        const detalle = document.getElementById('detalle').value;
        const fecha = new Date().toLocaleString();

        if(!cliente) return alert("M√≠nimo pon el nombre del cliente");

        const registro = { cliente, equipo, detalle, fecha };
        
        let historial = JSON.parse(localStorage.getItem('archivo_hidraulica')) || [];
        historial.push(registro);
        localStorage.setItem('archivo_hidraulica', JSON.stringify(historial));

        alert("¬°Guardado en el archivo!");
        irA('menu');
        limpiarCampos();
    }

    function cargarArchivo() {
        const lista = document.getElementById('lista-archivo');
        const datos = JSON.parse(localStorage.getItem('archivo_hidraulica')) || [];
        
        if(datos.length === 0) {
            lista.innerHTML = "<p>No hay registros guardados.</p>";
            return;
        }

        lista.innerHTML = datos.reverse().map(d => `
            <div class="tarjeta-archivo">
                <strong>${d.cliente}</strong> - <small>${d.fecha}</small><br>
                <span>M√°k: ${d.equipo}</span><br>
                <p style="font-size: 0.9em; color: #555;">${d.detalle}</p>
            </div>
        `).join('');
    }

    function descargarJSON() {
        const data = localStorage.getItem('archivo_hidraulica');
        const blob = new Blob([data], { type: 'application/json' });
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = `archivo_guillote_${new Date().toLocaleDateString()}.json`;
        a.click();
    }

    function limpiarCampos() {
        document.getElementById('nombre').value = '';
        document.getElementById('equipo').value = '';
        document.getElementById('detalle').value = '';
    }
</script>

</body>
</html>
